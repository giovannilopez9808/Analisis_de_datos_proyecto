\section{Métodos y materiales}

\subsection{Base de datos}

MiBici cuenta con una página de datos abiertos en la que se puede acceder a una base de datos del uso de este sistema de transporte\cite{mibici_data}. La base de datos está organizada en una serie de archivos CSV (valores separados por comas) con información mensual de los viajes realizados desde diciembre de 2014 hasta noviembre de 2021.

Los datos de los viajes están separados en archivos correspondientes a cada mes. Cada uno de los renglones de estos cuenta con la información de un viaje realizado. Los campos registrados para cada uno de los viajes en la base de datos son los siguientes:

\begin{itemize}
    \item \bfseries{Viaje\_Id }\normalfont \\ Número de identificación del viaje.
    \item \bfseries{Usuario\_Id }\normalfont\\ Número único de identificación del usuario.
    \item \bfseries{Genero }\normalfont
    \item \bfseries{Año\_de\_nacimiento }
    \item \bfseries{Inicio\_del\_viaje} \normalfont \\ Fecha de inicio del viaje en formato \lstinline|yyyy-mm-dd hh:mm|.
    \item \bfseries{Fin\_del\_viaje }\normalfont \\ Fecha y hora de fin del viaje en en formato \lstinline|yyyy-mm-dd hh:mm|.
    \item \bfseries{Origen\_Id }\normalfont \\ Número de identificación de la estación de salida.
    \item \bfseries{Destino\_Id }\normalfont \\ Número de identificación de la estación de llegada.
\end{itemize}

Así mismo el sistema nos brinda un archivo CSV con la nomenclatura de las estaciones. Lo que nos permite utilizar los identificadores de origen y destino para acceder a información de la dirección, ubicación y estado de servicio de cada estación. Para este trabajo se utilzaron los datos contenidos en el periodo 2015-2018. Con el propósito de analizar datos en años completos y sin alteraciones realizadas por la pandemia provocada por el COVID-19 sucedida en marzo del 2020.

\subsection{Promedio y varianza mensual por hora}

Sea un conjunto $Q(m,h)$ de datos para un mes $m$  entre las horas $h$ y $h+1$ con elementos $q$, entonces el promedio mensual por hora se calcula como:

\begin{equation}
    \mu_{Q(m,h)} = \frac{1}{n(m,h)} \sum_{i=1}^{n(m,h)} q_i \label{eq:monthly_hourly_mean}
\end{equation}

y la varianza se calcula como:

\begin{equation}
    \sigma^2_{Q(m,h)} = \frac{1}{n(m,h)-1} \sum_{i=1}^{n(m,h)} (q_i - \mu_{Q(m,h)})^2 \qquad \begin{matrix}
        m=1,2,\dots,12 \\
        h=6,7,\dots,23
    \end{matrix} \label{eq:monthly_hourly_var}
\end{equation}

donde $n(m,h)$ es el número total de elementos del conjunto $Q(m,h)$.

\subsection{Promedio y varianza diaria semanal por hora}

Sea un conjunto $Q(d,h)$ de datos para un día de la semana $d$  entre las horas $h$ y $h+1$ con elementos $q$, entonces el promedio diario semanal por hora se calcula como:

\begin{equation}
    \mu_{Q(d,h)} = \frac{1}{n(d,h)} \sum_{i=1}^{n(d,h)} q_i \label{eq:daily_hourly_mean}
\end{equation}

y la varianza se calcula como:

\begin{equation}
    \sigma^2_{Q(d,h)} = \frac{1}{n(d,h)-1} \sum_{i=1}^{n(d,h)} (q_i - \mu_{Q(d,h)})^2 \qquad \begin{matrix}
        d=1,2,\dots,7 \\
        h=6,7,\dots,23
    \end{matrix} \label{eq:daily_hourly_var}
\end{equation}

donde $n(d,h)$ es el número total de elementos del conjunto $Q(d,h)$.

\subsection{Promedio por hora dada una fecha}

Sea un conjunto $Q(f,h)$ de datos para una fecha $f$ con formato yyyy-mm-dd  entre las horas $h$ y $h+1$ con elementos $q$, entonces el promedio por hora es calculado como

\begin{equation}
    \mu_{Q(f,h)} = \frac{1}{n(f,h)} \sum_{i=1}^{n(f,h)} q_i \label{eq:hourly_mean}
\end{equation}

donde $n(f,h)$ es el número total de elementos del conjunto $Q(f,h)$.